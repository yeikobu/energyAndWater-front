---
import "@fontsource-variable/onest"

//Impotando la función que trae los servicios desde la API
import { getServices } from "../api/services"

import Layout from '../layouts/Layout.astro'
import MainteinanceCard from '../components/MainteinanceCard.astro'
import ServiceCard from "../components/ServiceCard.astro"

let services = []
//Array de objetos que contienen la información que se le pasará a cada MaintainceCard
const mainteinances = [
	{
		title: "Mantenimiento",
		description: "Conjunto de operaciones y cuidados necesarios para que tus instalaciones continúen funcionando correctamente."
	}, 
	{
		title: "Mantenimiento preventivo",
		description: "Ayuda a prolongar la vida útil de tus activos y aumenta la productividad, a través de una revisión."
	}, 
	{
		title: "Mantenimiento correctivo",
		description: "Corrige problemas o daños en las instalaciones o equipos."
	}
] 

//Obteniendo los servicios de la API
async function loadServices() {
  try {
    services = await getServices('http://localhost/energyandwater/controller/ServicesController.php');
  } catch (error) {
    console.error('Error al obtener los servicios:', error)
  } 
}

await loadServices()
---

<Layout title="Inicio - Energy & Water" desciption="Energy & Water - Mantenimiento para edificios">
	<main class="space-y-28 pt-24 px-8">
		<!--Sección de la imagen principal junto con los textos -->
		<section class="flex flex-col justify-center items-center">
			<img src="/logo.jpeg" alt="Imagen del home el cual muestra a hombres haciendo mantenimiento de aire acondicionado">
			<div class="text-center pt-4">
				<h1 class="text-white text-2xl sm:text-3xl font-extrabold shadow-primary"><span class="bg-gradient-to-r from-slate-700 via-white to-slate-700 text-transparent bg-clip-text">Mantenimiento para edificios</span></h1>
				<h3 class="text-gray-200 text-lg sm:text-xl font-bold">CLIMATIZACIÓN, ELECTRICIDAD Y OBRAS MENORES DE CONSTRUCCIÓN.</h3>
			</div>
		</section>

		<!--Sección de mantenimiento -->
		<section class="flex sm:flex-row flex-col space-x-4 text-center">
			{//Iterando el arreglo de mainteinances para transformar cada uno de sus objetos en una MaintainanceCard
				mainteinances.map((mainteinance) => (
					<MainteinanceCard title={mainteinance.title} description={mainteinance.description}/>
				))
			}
		</section>
		
		<section class="flex flex-col space-y-4 items-center pt-10">
			<h2 class="text-white text-2xl sm:text-3xl font-extrabold">Nuestros Servicios</h2>
			<div class="sm:grid sm:grid-cols-2 flex flex-col items-center">
				{services.map((service) => (
					<ServiceCard title={service.vch_service_name} description={service.vch_description} imgURL={service.vch_url_img} />
				))}
			</div>
		</section>
		  
	</main>
</Layout>

<style>
	* {
		font-family: "Onest Variable", system-ui, sans-serif;
	}

	img { 
		width: 25%;
		border-radius: 100%;
	}
</style>
